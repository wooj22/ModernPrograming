“maybe 타입(Maybe type)”은

	“값이 있을 수도 있고 없을 수도 있는 타입”을 의미하는 개념적 용어입니다.

	C++ 표준에서는 공식적으로 “maybe”라는 이름을 쓰지 않지만,
	템플릿/함수형/게임엔진 쪽에서는 optional 계열을 이렇게 부르는 경우가 많습니다.

가장 대표적인 구현은:

	std::optional<T>
	std::unique_ptr<T> (일부 문맥에서 “maybe pointer” 역할)
	std::shared_ptr<T> (역시 null 가능 → maybe 역할)
	함수형 스타일의 Maybe 모나드 패턴

까지 포함하여 “값 유무를 표현하는 타입”을 통칭합니다.



1. 왜 maybe 타입이 필요한가?

✔ 기존 C-스타일: 값이 없음을 표현하기 매우 번거로움
	포인터라면 NULL / nullptr
	정수라면 -1 같은 sentinel value
	struct라면 “비어 있음”을 임의 규칙으로 관리
	이런 방식은 버그 원인이 됩니다.

	그래서 현대 언어들은 “maybe 타입”을 도입해
	값이 없는 경우를 타입 시스템에 직접 표현합니다.

	C++은 그 역할을 optional, 스마트 포인터로 수행합니다.

2. maybe 타입의 핵심 특징

특징				설명
값이 유효할지 아닐지 명시적 표현	has_value() 로 체크
정적 분석에 친화적			사용 전에 검사해야 한다는 패턴이 명확
함수형 패턴을 도입 가능		map, transform, and_then 등
오버헤드 매우 적음(optional)		unique_ptr 은 포인터 간접 비용만

3. C++에서의 maybe 타입 구현들

✔ 1) std::optional<T> — canonical maybe

	std::optional<int> v;
	
	if (v) {
	    int x = *v;
	}

	값이 없으면 nullopt
	스택에 직접 값 저장 → zero overhead 수준
	“함수 반환값으로 상태 알리기”에 아주 적합

✔ 2) std::unique_ptr<T> — maybe pointer

	리소스(힙 객체)가 있을 수도 없을 수도 있는 “maybe 객체” 역할.

	std::unique_ptr<Texture> tex = loadTexture();
	
	if (tex) {
	    render(*tex);
	}

	특징:
	존재성: bool(tex)
	값 접근: tex-> or *tex
	optional 과 거의 비슷한 패턴
	단 owned-resource(소유권) 개념이 강함

✔ 3) std::shared_ptr<T> — separable maybe + shared ownership

	“값 유무”와 “참조 횟수” 두 개의 의미를 동시에 가짐.
	optional 과 다르게 복사 비용이 다소 있음.


🔎 4. maybe 타입이 제공하는 개발상의 이점

✔ (1) 오류를 줄임

	값이 없다는 것이 타입 시스템에 들어오므로 “검사 안 하고 쓰기”가 줄어듭니다.

✔ (2) return 값에서 에러·결과 구분 통일

	예:
	std::optional<Data> read();

	데이터가 없으면 nullopt
	있으면 Data
	→ 별도의 sentinel 값을 만들 필요가 없음.

✔ (3) 함수 구성(composition)에 강함

	예: optional/map/and_then 패턴

	auto res =
	    getUser(id)
	    .and_then(getInventory)
	    .and_then(getEquippedItem);


	각 단계가 “없으면 바로 종료” 같은 흐름을 자동 제공.


🔎 5. maybe 타입의 공통 사용 패턴

✔ 존재 여부 검사
	if (auto d = getSomething(); d) {
	    use(*d);
	}

✔ 안전한 반환
	std::optional<Config> loadConfig()
	{
	    if (!exists(file)) return std::nullopt;
	    return Config{...};
	}

✔ 함수형 조합

	optional 은 C++23부터 map, transform 같은 패턴이 더 보강됨.


🔎 6. maybe 타입의 계층

C++ 에서 이를 기능별로 정리하면:

종류		예				특징
maybe-value	optional<T>			값이 스택에 저장, 값 유무만 표현
maybe-pointer	unique_ptr<T> / shared_ptr<T>	힙 리소스 보유 여부까지 표현
maybe-ref	T*				가장 단순한 maybe
expected<T,E>	std::expected(C++23)		값 없을 경우 “이유(E)”까지 표현

특히 expected<T,E> 는 “maybe + 에러 정보”를 제공하는 최신 스타일입니다.


✔ 한 줄 요약

maybe 타입은
“값이 없을 수도 있다”는 가능성을 **타입 시스템에 명시적으로 올려서,
오류를 줄이고 코드 흐름을 더 견고하게 만드는 개념”입니다.

optional, unique_ptr, shared_ptr, T* 모두 문맥에 따라 maybe 타입의 역할을 수행합니다.